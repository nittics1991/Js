<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8"> 
<title></title>

<style>

ul, ol {
    list-style:none;
}

button {
    padding:0;
}

#main {
    display:flex;
    flex-wrap:wrap;
    
}

nav ul, nav ol {
    display:flex;
}



</style>

</head>
<body>

<div id="container">

<header>
    <h1>Marche Jobタイムマシーン</h1>
    
    <nav>
        <ul>
            <li><a href="#data_input">JOB入力</a></li>
            <li><a href="#data_view">タイムカード</a></li>
            <li><a href="#data_total_view">集計</a></li>
            <li><button name="csv_button">CSV出力</button></li>
        </ul>
    </nav>
</header>

<section id="main">
    <article id="data_input">
        <h2>JOB入力</h2>
        
        <nav>
            <ul>
                <li><input type="text" name="job_name"></li>
                <li><button name="job_name_button">登録</button></li>
            </ul>
        </nav>
        
        <table>
            <thead>
                <th>JOB名</th>
            </thead>
            <tbody>
                <td>業務終了</td>
            </tbody>
        </table>
    </article>
    
    <article id="data_view">
        <h2>タイムカード</h2>
        
        <nav>
            <ol>
                <li><button name="last_month_button"><<</button></li>
                <li><button name="previous_day_button"><</button></li>
                <li><input type="date" name="job_date"></li>
                <li><button name="tomorrow_button">></button></li>
                <li><button name="next_month_button">>></button></li>
            </ol>
        </nav>
        
        
        <table>
            <thead>
                <th>JOB名</th>
                <th>開始時刻</th>
                <th>作業時間(h)</th>
            </thead>
            <tbody>
            </tbody>
        </table>
    </article>
    
    <article id="data_total_view">
        <h2>集計</h2>
        
        <nav>
            <ol>
                <li><button name="last_month_button"><<</button></li>
                <li><button name="previous_day_button"><</button></li>
                <li><input type="date" name="job_date"></li>
                <li><button name="tomorrow_button">></button></li>
                <li><button name="next_month_button">>></button></li>
            </ol>
        </nav>
        
        <table>
            <thead>
                <th>JOB名</th>
                <th>開始時刻</th>
                <th>作業時間(h)</th>
            </thead>
            <tbody>
            </tbody>
        </table>
    </article>
    
</section>

</div>

<!--

<script src="./EventDispatcher.js"></script>
<script src="./LocalSessionRepository.js"></script>

-->

<script>

const NAMESPACE = 'marche';

let storage = window.localStorage;

//let storage_data = storage.getItem(NAMESPACE);


//debug
storage_data = {
};

storage_data[(new Date('2020-01-01 00:00:00')).getTime()] = 'AAA';
storage_data[(new Date('2020-01-01 01:00:00')).getTime()] = 'BBB';
storage_data[(new Date('2020-01-01 02:00:00')).getTime()] = 'CCC';
storage_data[(new Date('2020-01-01 03:00:00')).getTime()] = 'DDD';
storage_data[(new Date('2020-01-03 04:00:00')).getTime()] = 'EEE';
storage_data[(new Date('2020-01-02 05:00:00')).getTime()] = 'FFF';
storage_data[(new Date('2020-01-02 06:00:00')).getTime()] = 'GGG';

//LOOPテスト用
Object.prototype.hoge = function() {};

//日付文字列取得関数
toDate = (str_unixtime) => {
    let dt;
    
    try {
        dt = new Date(parseInt(str_unixtime));
    } catch (e) {
        return '';
    }
    return (new Date(str_unixtime - dt.getTimezoneOffset() * 60 * 1000))
        .toISOString().substr(0,10);
}










if (storage_data) {
    //JOB入力画面
    let str_table_data = '';
    
    Object.values(storage_data).reverse().forEach(function(jobname) {
        let mem = [];
        
        if (mem.indexOf(jobname) === -1) {
            return;
        }
        
        str_table_data += '<tr>\n';
        str_table_data += '<td>' + jobname + '</td>';
        
        mem.push(jobname);
    });
    
    let elem = document.querySelector('#data_input table tbody');
    
    
    
}











</script>

</body>
</html> 